(this["webpackJsonpmovementt-client"]=this["webpackJsonpmovementt-client"]||[]).push([[0],{18:function(e,t,n){e.exports=n(29)},23:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(5),c=n.n(l),o=(n(23),n(4),n(1));var u=function(){var e,t=Object(o.b)(),n=Object(o.c)((function(e){return e}));return n.error&&(e="Post failed to create"),a.a.createElement("div",{className:"lavender rounded p-1"},a.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var n=new FormData(e.target);console.log("body",n),fetch("https://movementt.herokuapp.com/posts",{credentials:"include",method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){console.log("HERE IS RETURN POST DATA:",e),t({type:"ADD_POST",payload:e}),t({type:"SWITCH_PAGE",page:"feed-page"})})).catch((function(e){return console.log(e)}))}(e)}},a.a.createElement("strong",null,"Create Post"),a.a.createElement("div",{className:"error"},e),a.a.createElement("br",null),a.a.createElement("label",{for:"file"},"Upload Video:"),a.a.createElement("input",{type:"file",id:"file",name:"file"}),a.a.createElement("br",null),a.a.createElement("label",{for:"comment"},"Add comment:"),a.a.createElement("input",{name:"comment",id:"comment",onChange:function(e){t({type:"HANDLE_COMMENT",payload:e.target.value})},value:n.comment}),a.a.createElement("br",null),a.a.createElement("input",{type:"hidden",name:"user_id",value:n.user.id}),a.a.createElement("button",{class:"btn btn-primary btn-sm"},"Submit")))},s=function(){var e=Object(o.c)((function(e){return e})),t=Object(o.b)();return a.a.createElement("div",{className:"p-2 m-2 bg-light rounded lavender",onClick:function(){return t({type:"SWITCH_PAGE",page:"profile"})}},a.a.createElement("h4",null,a.a.createElement("img",{className:"rounded-circle",src:e.user.file_url,alt:"user pic",height:"80",width:"80"}),a.a.createElement("span",{className:"pl-3"},e.user.username)))};var i=function(e){var t=Object(o.b)(),n=e.post;return a.a.createElement("div",{className:"border m-4 p-1 rounded-lg lavender",key:n.id},console.log("post",n),a.a.createElement("div",{onClick:function(){return t({type:"SWITCH_PAGE2",page:"other-profile",postId:n.id})}},a.a.createElement("img",{src:n.user.file_url,alt:"user pic ",height:"42",width:"42",className:"rounded m-1"}),a.a.createElement("strong",null," ",n.user.username),a.a.createElement("br",null)),a.a.createElement("video",{className:"video ",controls:!0},a.a.createElement("source",{src:n.file_url,type:"video/mp4"})),a.a.createElement("p",null,n.comment),a.a.createElement("i",{className:"fa fa-heart"}))};var m=function(){var e=Object(o.c)((function(e){return e}));return a.a.createElement("div",{className:"m-2"},e.posts.map((function(e){return a.a.createElement(i,{post:e,key:e.id})})))},p=n(13),d=n(14),E=n(16),f=n(15),b=n(17),h=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(n=Object(E.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={searchInput:"Search..."},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){this.setState({searchInput:e.target.value})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("form",{className:"form-inline",onSubmit:this.handleSubmit},a.a.createElement("input",{className:"form-control mr-sm-2",type:"text",value:this.state.searchInput,onChange:this.handleInput}),a.a.createElement("button",{className:"btn btn-primary btn-sm",type:"submit"},"Search")))}}]),t}(r.Component);var v=function(){var e,t;return Object(o.c)((function(e){return e})).user&&(e=a.a.createElement(u,null),t=a.a.createElement(s,null)),a.a.createElement("div",{className:"container-fluid"},e,a.a.createElement("div",{class:"row"},a.a.createElement("div",{class:"col-sm-8"},a.a.createElement(m,null)),a.a.createElement("div",{class:"col-sm-4 "},t,a.a.createElement(h,null))))},g=function(e){return a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("a",{className:"active",href:"#home"},"Posts")),a.a.createElement("li",null,a.a.createElement("a",{href:"#news"},"Saved")),a.a.createElement("li",null,a.a.createElement("a",{href:"#contact"},"Tagged")))},y=function(e){return a.a.createElement("span",{className:"b rounded"},a.a.createElement("video",{width:"100%",height:"100%",controls:!0},a.a.createElement("source",{src:e.post.file_url,type:"video/mp4"})))};var O=function(){var e=Object(o.c)((function(e){return e}));return a.a.createElement("div",{className:"border lavender rounded"},e.user.posts.map((function(e){return a.a.createElement(y,{post:e,key:e.id})})))};var S=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e}));return a.a.createElement("div",{className:""},a.a.createElement("div",{class:"media border p-3 lavender rounded"},a.a.createElement("img",{src:t.user.file_url,alt:"user pic",class:"mr-3 mt-3 rounded-circle",width:"60px"}),a.a.createElement("div",{class:"media-body"},a.a.createElement("h4",null,t.user.username),a.a.createElement("p",null,"Bio: ",t.user.description)),a.a.createElement("button",{class:"btn btn-outline-primary btn-sm",onClick:function(){return e({type:"SWITCH_PAGE",page:"edit-profile"})}},"Edit profile")),a.a.createElement(g,null),a.a.createElement("br",null),a.a.createElement(O,null))};var _=function(){var e=Object(o.c)((function(e){return e}));return e.otherUser?a.a.createElement("div",{className:"border lavender rounded"},e.otherUser.posts.map((function(e){return a.a.createElement(y,{post:e,key:e.id})}))):null};var j=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})),n=t.posts[t.postIndex].user;return Object(r.useEffect)((function(){fetch("https://movementt.herokuapp.com/users/".concat(n.id),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log("otherUser: ",t),e({type:"SET_OTHER_USER",otherUser:t})}))}),[]),a.a.createElement("div",{className:""},a.a.createElement("div",{class:"media border p-3 lavender rounded"},a.a.createElement("img",{src:n.file_url,alt:"user pic",class:"mr-3 mt-3 rounded-circle",width:"60px"}),a.a.createElement("div",{class:"media-body"},a.a.createElement("h4",null,n.username),a.a.createElement("p",null,"Bio: ",n.description))),a.a.createElement(g,null),a.a.createElement("br",null),a.a.createElement(_,null))};var N=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e}));return a.a.createElement("div",{className:"lavender"},a.a.createElement("p",null,a.a.createElement("strong",null,"Edit ",t.user.username,"'s profile")),a.a.createElement("form",{onSubmit:function(n){return function(n){n.preventDefault();var r=new FormData(n.target);fetch("https://movementt.herokuapp.com/users/".concat(t.user.id),{credentials:"include",headers:{},method:"PATCH",body:r}).then((function(e){return e.json()})).then((function(t){console.log("After profile edit fetch request:",t),e({type:"HANDLE_PROFILE_EDIT_SUBMIT",payload:t}),e({type:"SWITCH_PAGE",page:"profile"})}))}(n)},onChange:function(t){e({type:"HANDLE_PROFILE_CHANGE",payload:t.target})}},a.a.createElement("label",{for:"avatar"},"Choose Profile Pic:"),a.a.createElement("input",{type:"file",id:"avatar",name:"avatar"}),a.a.createElement("br",null),a.a.createElement("label",{for:"description"},"Write Bio:"),a.a.createElement("input",{name:"description",id:"description",value:t.description}),a.a.createElement("br",null),a.a.createElement("input",{className:"btn btn-primary btn-sm m-1",type:"submit",value:"submit"})))};var T=function(){var e,t=Object(o.b)(),n=Object(o.c)((function(e){return e}));return console.log("HI MOM",n),n.error&&(e="Invalid Login"),a.a.createElement("form",{className:"whitefont font-weight-bold",onSubmit:function(e){return function(e){console.log("HANDLE-LOGIN"),e.preventDefault(),fetch("https://movementt.herokuapp.com/login",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.target.username.value,password:e.target.password.value})}).then((function(e){return e.json()})).then((function(e){e.success?(t({type:"SET_USER",user:e}),t({type:"SWITCH_PAGE",page:"feed-page"})):t({type:"ERROR"})}))}(e)}},a.a.createElement("div",{className:"error"},e),a.a.createElement("br",null),a.a.createElement("br",null),"username:",a.a.createElement("input",{name:"username"}),a.a.createElement("br",null),a.a.createElement("br",null),"password:",a.a.createElement("input",{type:"password",name:"password"}),a.a.createElement("input",{type:"submit",value:"Log In"}))};var w=function(){var e=Object(o.b)();return a.a.createElement("form",{className:"whitefont font-weight-bold",onSubmit:function(t){return function(t){t.preventDefault(),fetch("https://movementt.herokuapp.com/users",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.target.username.value,password:t.target.password.value})}).then((function(e){return e.json()})).then((function(t){t.success?(e({type:"SET_USER",user:t}),e({type:"SWITCH_PAGE",page:"feed-page"})):alert("Username is taken, try another")}))}(t)}},"username:",a.a.createElement("input",{name:"username"}),a.a.createElement("br",null),a.a.createElement("br",null),"password:",a.a.createElement("input",{name:"password",type:"password"}),a.a.createElement("input",{type:"submit",value:"Create Account"}))};var P=function(){var e,t=Object(o.b)(),n=Object(o.c)((function(e){return e}));return Object(r.useEffect)((function(){fetch("https://movementt.herokuapp.com/currentuser",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){console.log("currentuser: ",e),e.error||t({type:"SET_USER",user:e})})),fetch("https://movementt.herokuapp.com/posts",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){console.log("posts",e),t({type:"GET_POSTS",payload:e})}))}),[]),"feed-page"===n.page&&(e=a.a.createElement(v,null)),"login"===n.page&&(e=a.a.createElement(T,null)),"signup"===n.page&&(e=a.a.createElement(w,null)),"profile"===n.page&&(e=a.a.createElement(S,null)),"other-profile"===n.page&&(e=a.a.createElement(j,null)),"edit-profile"===n.page&&(e=a.a.createElement(N,null)),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"text-center ",onClick:function(){return t({type:"SWITCH_PAGE",page:"feed-page"})}},a.a.createElement("h1",null,"Movementt")),a.a.createElement("div",{className:"right font-weight-bold"},n.user?a.a.createElement("div",null,a.a.createElement("div",{className:"whitefont"},"Logged in as ",n.user.username),a.a.createElement("button",{class:"btn btn-primary btn-sm",onClick:function(){fetch("https://movementt.herokuapp.com/logout",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){t({type:"LOGOUT"})}))}},"Logout"),a.a.createElement("br",null),a.a.createElement("br",null)):a.a.createElement("div",null,a.a.createElement("button",{class:"btn btn-primary btn-sm mr-2",onClick:function(){return t({type:"SWITCH_PAGE",page:"login"})}},"Login"),a.a.createElement("button",{class:"btn btn-primary btn-sm",onClick:function(){return t({type:"SWITCH_PAGE",page:"signup"})}},"Create Account"),a.a.createElement("br",null),a.a.createElement("br",null))),e)},I=n(10);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=n(6),H=Object(D.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[],user:null,error:!1,page:"feed-page",comment:"",postIndex:null,otherUser:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":return A({},e,{posts:e.posts.concat(t.payload)});case"GET_POSTS":return A({},e,{posts:t.payload});case"SET_USER":return A({},e,{user:t.user});case"SET_OTHER_USER":return A({},e,{otherUser:t.otherUser});case"SWITCH_PAGE":return A({},e,{page:t.page});case"SWITCH_PAGE2":return A({},e,{page:t.page,postIndex:t.postId-1});case"ERROR":return A({},e,{error:!0});case"LOGOUT":return A({},e,{user:null});case"HANDLE_COMMENT":return A({},e,{comment:t.payload});case"HANDLE_PROFILE_CHANGE":return A({},e,{user:A({},e.user,Object(I.a)({},t.payload.name,t.payload.value))});case"HANDLE_PROFILE_EDIT_SUBMIT":return A({},e,{user:A({},e.user,{description:t.payload.value,avatar:t.payload.avatar})});default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(a.a.createElement(o.a,{store:H},a.a.createElement(P,null)),document.getElementById("root"))},4:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.61de03d9.chunk.js.map